"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var React=require("react");var HeaderBar=function(_super){__extends(HeaderBar,_super);function HeaderBar(){_super.call(this);this.state={}}HeaderBar.prototype.closeMenu=function(){this.setState({openElement:undefined,menuTarget:undefined})};HeaderBar.prototype.componentWillReceiveProps=function(nextProps){this.closeMenu()};HeaderBar.prototype.openMenu=function(item,target){var openElement=this.state.openElement;if(openElement&&openElement.id===item.id){this.closeMenu();return}if(item.renderMenu){this.setState({openElement:item,menuTarget:target})}};HeaderBar.prototype.renderMenu=function(){var _a=this.state,openElement=_a.openElement,menuTarget=_a.menuTarget;if(!openElement||!openElement.renderMenu)return null;return React.cloneElement(openElement.renderMenu(menuTarget),{onClose:this.closeMenu.bind(this)})};HeaderBar.prototype.renderChildren=function(children){var _this=this;if(!children||children.length===0)return null;return children.map(function(c){var onClick=function(event){if(c.onClick)c.onClick();_this.openMenu(c,event.target)};return React.createElement("div",{key:c.id,className:c.className,onClick:onClick},c.content)})};HeaderBar.prototype.render=function(){var _a=this.props,leftChildren=_a.leftChildren,rightChildren=_a.rightChildren,className=_a.className,style=_a.style;return React.createElement("header",{className:className?"header-bar "+className:"header-bar",style:style||{}},React.createElement("div",{className:"left-bar"},this.renderChildren(leftChildren)),React.createElement("div",{className:"right-bar"},this.renderChildren(rightChildren)),this.renderMenu(),this.props.children)};return HeaderBar}(React.Component);exports.HeaderBar=HeaderBar;