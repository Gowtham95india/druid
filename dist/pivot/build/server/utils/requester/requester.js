"use strict";var plywood_1=require("plywood");var plywood_druid_requester_1=require("plywood-druid-requester");var plywood_mysql_requester_1=require("plywood-mysql-requester");var plywood_postgres_requester_1=require("plywood-postgres-requester");function properRequesterFactory(e){var r=e.type,t=e.host,o=e.retry,s=e.timeout,u=e.verbose,a=e.concurrentLimit;var d;switch(r){case"druid":d=plywood_druid_requester_1.druidRequesterFactory({host:t,timeout:s||3e4,requestDecorator:e.druidRequestDecorator});break;case"mysql":d=plywood_mysql_requester_1.mySqlRequesterFactory({host:t,database:e.database,user:e.user,password:e.password});break;case"postgres":d=plywood_postgres_requester_1.postgresRequesterFactory({host:t,database:e.database,user:e.user,password:e.password});break;default:throw new Error("unknown requester type "+r)}if(o){d=plywood_1.retryRequesterFactory({requester:d,retry:o,delay:500,retryOnTimeout:false})}if(u){d=plywood_1.verboseRequesterFactory({requester:d})}if(a){d=plywood_1.concurrentLimitRequesterFactory({requester:d,concurrentLimit:a})}return d}exports.properRequesterFactory=properRequesterFactory;