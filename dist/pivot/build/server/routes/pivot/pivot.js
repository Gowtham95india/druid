"use strict";var nike_hercules_1=require("@implydata/nike-hercules");var views_1=require("../../views");var config_1=require("../../config");var router=nike_hercules_1.HerculesServer.makeRouter();router.get("/",function(e,i,r){e.getFullSettings().then(function(r){var t=r.appSettings,s=r.timekeeper;var n=null;if(config_1.LICENSE_MANGER.isExpired()){n="expired"}else if(config_1.LICENSE_MANGER.isWelcomeNeeded()){n="welcome";config_1.LICENSE_MANGER.welcomeShown()}var o=t.toClientSettings();i.send(views_1.pivotLayout({version:e.version,title:t.customization.getTitleWithVersion(e.version),user:e.user?e.user.toClientUser():null,appSettings:o,timekeeper:s,stateful:e.stateful,userMode:e.userMode,specialRun:n}))}).done()});module.exports=router;