"use strict";var __extends=this&&this.__extends||function(e,a){for(var t in a)if(a.hasOwnProperty(t))e[t]=a[t];function n(){this.constructor=e}e.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)};var immutable_class_1=require("immutable-class");var general_1=require("../../utils/general/general");var data_cube_1=require("../data-cube/data-cube");var essence_1=require("../essence/essence");var CollectionTile=function(e){__extends(a,e);function a(a){e.call(this,a);this.title=this.title||general_1.makeTitle(name)}a.isCollectionTile=function(e){return e instanceof a};a.fromJS=function(e,t){if(!t)throw new Error("CollectionTile must have context");var n=t.dataCubes,i=t.visualizations;var l=e.dataCube;var r=immutable_class_1.SimpleArray.find(n,function(e){return e.name===l});if(!r)throw new Error("can not find dataCube '"+l+"'");var s=essence_1.Essence.fromJS(e.essence,{dataCube:r,visualizations:i});return new a({name:e.name,title:e.title,description:e.description,group:e.group,dataCube:r,essence:s})};a.PROPERTIES=[{name:"name",validate:general_1.verifyUrlSafeName},{name:"title",defaultValue:null},{name:"description",defaultValue:null},{name:"group",defaultValue:null},{name:"dataCube",immutableClass:data_cube_1.DataCube,toJS:function(e){return e.name}},{name:"essence",immutableClass:essence_1.Essence}];return a}(immutable_class_1.BaseImmutable);exports.CollectionTile=CollectionTile;immutable_class_1.BaseImmutable.finalize(CollectionTile);