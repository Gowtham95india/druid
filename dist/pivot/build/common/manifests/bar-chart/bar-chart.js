"use strict";var __extends=this&&this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)};var index_1=require("../../models/index");var manifest_1=require("../../models/manifest/manifest");var BarChartManifest=function(t){__extends(e,t);function e(){t.apply(this,arguments);this.name="bar-chart";this.title="Bar Chart"}e.prototype.canHandleSplitDimensions=function(t,e,i,n){var r=function(e){var i=t.getSplitableDimensionByKind(e).slice(0,2);return i.length?i:null};var s=r("number")||r("boolean")||r("string")||[];var a=function(t){return index_1.SplitCombine.fromDimensionAndFilterAndMeasure(t,i,n)};if(!e.length){return manifest_1.Resolve.rejectDimensions("The Bar Chart requires at least one split",s.map(function(t){return manifest_1.SplitSuggestion.fromTitleAndSplit("Add a split on "+t.title,a(t))}))}else if(e.length>2){return manifest_1.Resolve.rejectDimensions("Too many splits on the bar chart",[manifest_1.SplitSuggestion.fromTitleAndSplit("Remove all but the first split",a(e[0]))])}else{return manifest_1.Resolve.proceedWithDimensions()}};e.prototype.getSuitability=function(t,e,i,n){var r=n?10:4;if(e.length()===1&&t.getSplitableDimension(e.first().dimension).getKind()==="number")r=10;if(e.splitCombines.some(function(t){return!t.limitAction})){r=r-1}return new manifest_1.Suitability(r)};e.prototype.getEffectiveSplits=function(t){var e=false;var i=t.splitCombines.map(function(t){if(!t.limitAction){e=true;return t.changeLimit(25)}return t});return e?new index_1.Splits(i):t};return e}(manifest_1.Manifest);exports.BarChartManifest=BarChartManifest;exports.BAR_CHART_MANIFEST=new BarChartManifest;